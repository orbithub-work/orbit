# 状态栏 + 任务面板设计 - VSCode 风格

## 📊 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│                        主应用区域                                 │
│                                                                  │
├─────────────────────────────────────────────────────────────────┤
│                     任务面板（可展开/收起）                        │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ 📋 任务 (3)                                    🗑️  ✕       │ │
│  ├────────────────────────────────────────────────────────────┤ │
│  │ 🔄 扫描文件                                    刚刚          │ │
│  │    正在扫描 /Users/project/assets                           │ │
│  │    ████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  45%         │ │
│  └────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│ [⚙️ 扫描中 45%]                    📁 项目A  📷 1,234项  💾 2.3GB │ [🟢] v1.0.0 │
└─────────────────────────────────────────────────────────────────┘
  左侧：当前任务（无任务时隐藏）        右侧：统计信息 + 系统状态
```

## 🎯 状态栏布局

### 左侧区域（动态显示）
- **当前任务**（有任务时才显示）
  - 图标 + 任务描述 + 进度百分比
  - 运行中：旋转动画
  - 错误：红色高亮
  - 点击：展开任务面板
  - **无任务时完全隐藏，不占空间**

### 右侧区域（始终显示）
1. **统计信息**
   - 📁 当前项目名称
   - 📷 素材总数
   - ✅ 已选中数量（有选中时显示）
   - 💾 存储空间

2. **分隔线**
   - 竖线分隔统计和系统状态

3. **系统状态**
   - 🟢/🔴 WebSocket 连接状态
   - 版本号

### 布局结构
- **高度**：300px（可调整）
- **位置**：固定在底部，状态栏上方
- **动画**：从底部滑入/滑出

### 面板头部
1. **左侧**
   - 📋 图标 + "任务" 标题
   - 任务数量徽章

2. **右侧**
   - 🗑️ 清空已完成任务
   - ✕ 关闭面板

### 任务列表
每个任务项显示：
1. **状态图标**
   - 🔄 运行中（旋转动画）
   - ✅ 已完成（绿色）
   - ❌ 失败（红色）
   - ⏰ 等待中（灰色）

2. **任务信息**
   - 任务名称（粗体）
   - 时间戳（右上角）
   - 详细消息
   - 进度条（运行中时）
   - 错误信息（失败时）

3. **操作按钮**
   - ✕ 取消（运行中）
   - 🔄 重试（失败时）

### 状态样式
- **运行中**：蓝色左边框
- **已完成**：绿色左边框，半透明
- **失败**：红色左边框

## 📊 状态栏布局

```
┌─────────────────────────────────────────────────────────────────┐
│ [⚙️ 扫描中... 45%] [⏰ 3]  │  📁 项目A  📷 1,234项  已选中 5项  💾 2.3GB  │  [🟢] v1.0.0 │
└─────────────────────────────────────────────────────────────────┘
   左侧：任务状态              中间：统计信息                    右侧：系统状态
```

## 🎯 功能区域

### 左侧 - 任务状态
1. **当前任务**
   - 图标 + 任务描述 + 进度百分比
   - 运行中：旋转动画
   - 错误：红色高亮
   - 完成：2秒后自动消失
   - 点击：展开任务面板

2. **待处理任务**
   - 时钟图标 + 数量
   - 点击：展开任务队列

### 中间 - 统计信息
1. **项目名称**
   - 📁 图标 + 当前项目名

2. **素材总数**
   - 📷 图标 + 格式化数字（1,234）

3. **已选中数量**
   - 蓝色高亮显示
   - 只在有选中时显示

4. **存储空间**
   - 💾 图标 + 格式化大小（2.3 GB）

### 右侧 - 系统状态
1. **WebSocket 连接**
   - 🟢 已连接（绿色）
   - 🔴 未连接（红色）
   - Hover 显示状态文字

2. **版本号**
   - 灰色小字显示

## 🔌 WebSocket 事件

### 后端需要发送的事件

```typescript
// 任务开始
{
  event: 'task:start',
  data: {
    id: 'task-123',
    type: 'scan' | 'import' | 'thumbnail' | 'export',
    message: '正在扫描文件...'
  }
}

// 任务进度
{
  event: 'task:progress',
  data: {
    id: 'task-123',
    progress: 45,  // 0-100
    message: '已处理 450/1000 个文件'
  }
}

// 任务完成
{
  event: 'task:complete',
  data: {
    id: 'task-123',
    message: '扫描完成'
  }
}

// 任务错误
{
  event: 'task:error',
  data: {
    id: 'task-123',
    error: '扫描失败：权限不足'
  }
}

// 任务队列更新
{
  event: 'task:queue',
  data: {
    count: 3  // 待处理任务数
  }
}
```

## 🎨 样式特点

- **高度**：24px（VSCode 标准）
- **背景**：深色 #1e1e1e
- **字体**：12px
- **间距**：紧凑但不拥挤
- **交互**：
  - Hover 高亮
  - 可点击项有 cursor: pointer
  - 平滑过渡动画

## 📝 使用示例

```vue
<StatusBar 
  :stats="{
    projectName: '我的项目',
    totalAssets: 1234,
    selectedCount: 5,
    storageSize: 2468013568  // bytes
  }"
  :ws-connected="true"
  @toggle-tasks="handleToggleTasks"
/>
```

## 🚀 后续扩展

### Phase 2
1. **任务面板**
   - 点击状态栏展开底部面板
   - 显示所有任务历史
   - 支持取消/重试

2. **更多统计**
   - 标签数量
   - 评分分布
   - 文件类型分布

3. **快捷操作**
   - 右键菜单
   - 快速跳转
   - 复制统计信息

### Phase 3
1. **通知中心**
   - 集成系统通知
   - 错误日志
   - 操作历史

2. **性能监控**
   - CPU/内存使用
   - 数据库性能
   - 缓存命中率
