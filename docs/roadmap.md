# 智归档 OS (Media Assistant) 项目路线图

## 1. 战略定位与竞品分析 (Strategic Positioning)

### 核心功能对比矩阵
| 功能 | 智归档OS | Billfish | Eagle | 差距评估 |
| :--- | :--- | :--- | :--- | :--- |
| **文件扫描索引** | ✅ 增量扫描+指纹去重 | ✅ 实时监听 | ✅ 实时监听 | 领先（增量算法更优） |
| **素材预览** | ⚠️ 基础缩略图 | ✅ 全格式预览 | ✅ 优秀预览 | 落后（视频/PDF预览弱） |
| **标签系统** | ⚠️ DB完成，UI待完善 | ✅ 完整 | ✅ 完整 | 落后（缺UI和批量操作） |
| **文件夹同步** | ⚠️ Stub实现 | ✅ 双向同步 | ✅ 双向同步 | 落后（缺实时监听） |
| **浏览器采集** | ❌ 未实现 | ✅ 插件采集 | ✅ 插件采集 | 缺失（创作者刚需） |
| **项目-资产关系** | ✅ 完整设计 | ⚠️ 简单分类 | ⚠️ 文件夹 | **代际领先**（Content/Instance模式） |
| **工程文件解析** | ⚠️ 规划中 | ❌ 无 | ❌ 无 | **潜在绝对优势**（剪映联动） |
| **插件生态** | 🔄 架构设计 | ❌ 封闭 | ⚠️ 有限API | 未来优势（主从协议） |
| **AI集成** | 🔄 规划中 | ❌ 无 | ❌ 无 | 未来优势（提前布局） |

### 关键差距与优势分析
- **必须补齐的短板**：
    1. **标签系统 UI**：前端缺创建/编辑/删除标签界面，缺批量操作。
    2. **素材预览**：视频、PDF、RAW 图片预览需完善。
    3. **浏览器采集**：创作者从网页收集素材的核心需求。
    4. **实时监听**：补齐文件系统事件监听，减少手动扫描依赖。
- **差异化长板**：
    1. **项目-资产关系**：这是核心差异化竞争力，Eagle/Billfish 仍是“高级文件夹”思维。
    2. **工程文件深度解析**：剪映/PR 等工程文件联动是独家“杀手锏”。

## 2. 接下来 3 个月开发优先级 (Next 3 Months Roadmap)

### P0: 核心可用性补齐 (核心基座 60 分)
- [ ] **标签系统 UI 补全 (2周)**：创建、编辑、删除、批量打标签。
- [ ] **多媒体预览完善 (2周)**：集成 FFmpeg 视频抽帧、PDF 封面生成。
- [ ] **基础批量操作 (1周)**：全选、批量删除、批量移动、批量归档。

### P1: 差异化竞争力构建 (独家优势 90 分)
- [ ] **剪映工程文件解析 (4周)**：实现素材自动标记、断链提醒、工程备份。
- [ ] **项目统计视图 (1周)**：文件数、总大小、类型分布可视化。

### P2: 未来布局与调研
- [ ] **CapabilityRegistry 架构 (2周)**：为 AI Agent 和能力协商做准备。
- [ ] **浏览器采集插件调研 (1周)**：技术选型与原型设计。

## 3. 项目阶段进度回顾 (Historical Progress)

| 阶段 | 状态 | 目标 | 核心功能 |
| :--- | :--- | :--- | :--- |
| **Phase 1: 架构设计** | ✅ 已完成 | 确立基座+插件架构 | 完成设计文档、技术选型、核心逻辑共识。 |
| **Phase 2: 核心基座 (MVP)** | ✅ 已完成 | 实现资产管理闭环 | 项目管理、指纹索引、抽样哈希、定时扫描、Dock 栏。 |
| **Phase 3: 插件生态** | 🚧 进行中 | 扩展第三方创作流 | 剪映解析插件、PR 联动插件、AI 元数据增强。 |
| **Phase 4: 工作室协作** | 📅 待启动 | 内网分布式资产共享 | 多机组网、内网 API 授权、远程素材拖拽。 |

## 2. 详细开发进度跟踪 (Detailed Tracking)

### 【Phase 2: 核心基座】
- [x] **基础设施搭建**
    - [x] 数据库层集成 (SQLite)
    - [x] 初始数据库迁移系统
    - [x] 开发规范与 AI Prompt 确立
- [x] **资产管理核心**
    - [x] 实现抽样快速哈希算法 (Fast Hash)
    - [x] 完善“内容与实例分离”实体模型 (Asset & ProjectAsset)
    - [x] 实现增量文件扫描器 (File Scanner)
- [x] **生产力 Dock 栏**
    - [x] 搜索服务 (Search Service) 与 API
    - [x] Dock 栏独立窗口配置 (Electron 控制)
    - [x] 常用项目/目录横向流展示 (Drawer API)
    - [x] 拖拽至外部程序 (Drag-and-Drop) 逻辑
- [x] **系统健壮性**
    - [x] 双轨日志系统 (SQLite + Local File)
    - [x] 内网 API 基础框架 (Go Standard Library)
    - [x] 混合通信架构 (Hybrid Communication)

---

## 3. 文档指南 (Documentation Index)

- 📌 **[design-doc.md](./design-doc.md)**: 核心产品逻辑与架构设计（指纹、子孙素材、Dock交互）。
- 🛠️ **[development-guide.md](./development-guide.md)**: 开发规范、环境搭建、中文注释要求及 AI 协作指南。
- 📋 **[product-spec-v1.0.md](./product-spec-v1.0.md)**: 初始产品需求说明书（参考用）。
- 📝 **[IMPLEMENTATION_REPORT.md](./IMPLEMENTATION_REPORT.md)**: 早期开发进度记录。
